---
layout: post
title:  "php 抓取文章分页"
date:   2015-09-14 15:14:54
categories: php
excerpt: 抓取文章分页

---

* content
{:toc}

### 抓取

抓取文章分页的时候，之前的我用的是正则匹配，但是对正则的熟练程度不是很高

，效率比较低，于是就用simple dom ，[simple dom](http://simplehtmldom.sourceforge.net/)的语法比较简单，容易上手.

 抓取文章分页的时候主要是根据它的下一页这个节点进行判断，若有，把下一页的节点的链接匹配出来，继续往下判断（递归）....分页过多的时候，我们不在浏览器下执行，我们可以在cli 执行


###  cli环境

首先我们需要将系统ini 文件进行替换，不然一些模块方法加载的时候会报错


然后进入cmd,输入 
<pre><code>
E:\wamp\bin\php\php5.3.10\php cli.php "request_uri=/Curl/car"
</code>
</pre>

如果出现
<pre><code>
Allowed memory size of 67108864 bytes exhausted
</code>
</pre>
错误，我们可以通过使用
<pre><code>
ini_set("memory_limit","512M"); 
</code>
</pre>

或者我们可以在php.ini文件中把memory_limit参数默认的128M修改为256M或者更大：


注：<strong style="color:red;">如果运行过程中出现mysql has gone away 的状况，请断开连接，重新连接数据库一次。</strong>

OK ~~~nice




